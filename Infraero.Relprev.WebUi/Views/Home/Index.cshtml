@{
    ViewData["Title"] = "Sing In Relprev";
    Layout = "~/Views/Shared/_LayoutSingIn.cshtml";

}
<section class="body-sign">
    <div class="center-sign">
        <a href="/" class="logo float-left" style="margin-top: 15px;">
            <img src="img/logo.png" height="54" alt="Porto Admin" />
        </a>

        <div class="panel card-sign">
            <div class="card-title-sign mt-3 text-right">
                <h2 class="title text-uppercase font-weight-bold m-0"><i class="fa fa-user mr-1"></i> Acesso ao Sistema</h2>
            </div>
            <div class="card-body">
                @using (@Html.BeginForm("Login", "Home", FormMethod.Post))
                {
                    <div class="form-group mb-3">
                        <label>Usuário</label>
                        <div class="input-group input-group-icon">
                            <input name="usuario" type="text" class="form-control form-control-lg" />
                            <span class="input-group-addon">
                                <span class="icon icon-lg">
                                    <i class="fa fa-user"></i>
                                </span>
                            </span>
                        </div>
                    </div>

                    <div class="form-group mb-3">
                        <div class="clearfix">
                            <label class="float-left">Senha</label>
                            <a href="@Url.Action("RecuperarSenha", "Home")" class="float-right">Recuperar Senha</a>
                        </div>
                        <div class="input-group input-group-icon">
                            <input name="password" type="password" class="form-control form-control-lg" />
                            <span class="input-group-addon">
                                <span class="icon icon-lg">
                                    <i class="fa fa-lock"></i>
                                </span>
                            </span>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 control-label text-sm-right pt-2">Sub local da ocorrência <span class="required">*</span></label>
                            <div class="col-sm-9">
                                <textarea type="text" rows="3" name="DscSubLocal" class="form-control" placeholder="eg.: Descrição do sub local de ocorrência  "
                                          title="Por favor informe a descrição do sub local de ocorrência." required maxlength="50"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-8">
                        </div>
                        <div class="col-sm-4 text-right">
                            <button type="submit" class="btn btn-primary mt-2">Entrar</button>
                        </div>
                    </div>




                }

            </div>
        </div>

        <p class="text-center text-muted mt-3 mb-3">&copy; Copyright 2019. Todos os direitos reservados.</p>
    </div>
</section>

@section Scripts {
    <script src="~/vendor/jquery-validation/jquery.validate.js"></script>

    <script>

            // Select2
            (function ($) {

                'use strict';

                var $select = $(".select2").select2({
                    allowClear: true
                });

                $(".select2").each(function () {
                    var $this = $(this),
                        opts = {};

                    var pluginOptions = $this.data('plugin-options');
                    if (pluginOptions)
                        opts = pluginOptions;

                    $this.themePluginSelect2(opts);
                });

            /*
             * When you change the value the select via select2, it triggers
             * a 'change' event, but the jquery validation plugin
             * only re-validates on 'blur'*/

            $select.on('change', function() {
                $(this).trigger('blur');
            });

            $('#form').validate({
                ignore: 'input[type=hidden], .select2-input, .select2-focusser'
            });

            $select.rules('add', 'required');

                $("#ddlUnidadeInfraestrutura").change(function () {

                    var url = '@Url.Content("~/")' + "SubLocal/GetListLocalById";

                    var ddlSource = "#ddlUnidadeInfraestrutura";

                    $.getJSON(url,
                        { id: $(ddlSource).val() },
                        function(data) {
                            var items = '';
                            $("#ddlLocal").empty;
                            $.each(data,
                                function(i, row) {
                                    items += "<option value='" + row.value + "'>" + row.text + "</option>";
                                });
                            $("#ddlLocal").html(items);
                        });
                });

                // checkbox, radio and selects
                $("#chk-radios-form, #form").each(function() {
                    $(this).validate({
                        highlight: function(element) {
                            $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
                        },
                        success: function(element) {
                            $(element).closest('.form-group').removeClass('has-error');
                        }
                    });
                });

            }).apply(this, [jQuery]);

    </script>
}

